generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model actividad {
  ActividadId            Int                      @id
  NombreActividad        String                   @db.VarChar(45)
  Turno                  String                   @db.VarChar(45)
  Hora_Inicio            String                   @map("Hora Inicio") @db.VarChar(45)
  activa                 Boolean                  @default(true)
  Hora_Fin               String                   @map("Hora Fin") @db.VarChar(45)
  Descripcion            String                   @db.VarChar(5000)
  Cupo                   Int
  asistencia             asistencia[]
  personaacargoactividad personaacargoactividad[]
  rutinagenerica         rutinagenerica[]
  rutinapersonalizada    rutinapersonalizada[]
}

model asistencia {
  NroAsistencia Int        @id @default(autoincrement())
  DniFK         Float
  ActividadFK   Int?
  DiaAsistencia DateTime?  @db.Timestamp(4)
  actividad     actividad? @relation(fields: [ActividadFK], references: [ActividadId], onDelete: NoAction, onUpdate: NoAction, map: "asistencia-actividad")
  persona       persona    @relation(fields: [DniFK], references: [dni], onDelete: NoAction, onUpdate: NoAction, map: "asistencia-persona")

  @@index([DniFK], map: "asistencia-persona_idx")
  @@index([ActividadFK], map: "asistencia-Actividad_idx")
}

model cuota {
  CodCuota  Int      @id @default(autoincrement())
  DniFK     Float
  FechaPago DateTime @db.Timestamp(6)
  precio    Float
  persona   persona  @relation(fields: [DniFK], references: [dni], map: "cuota-persona")

  @@index([DniFK], map: "cuota-persona_idx")
}

model persona {
  dni                    Float                   @id
  IdRolfk                Int
  RutinasFK              Int?
  email                  String                  @db.VarChar(255)
  password               String                  @db.VarChar(32)
  NombreCompleto         String                  @db.VarChar(100)
  sexo                   String                  @db.VarChar(10)
  telefono               String                  @db.VarChar(45)
  direccion              String                  @db.VarChar(90)
  estado                 Boolean                 @default(true)
  asistencia             asistencia[]
  cuota                  cuota[]
  rol                    rol                     @relation(fields: [IdRolfk], references: [idrol], map: "persona-rol")
  personaacargoactividad personaacargoactividad?
  post                   post[]
  rutinapersonalizada    rutinapersonalizada[]
  venta                  venta[]

  @@index([IdRolfk], map: "persona-rol_idx")
}

model personaacargoactividad {
  DniPersonaAcargo Float     @id
  IdActividadFk    Int
  actividad        actividad @relation(fields: [IdActividadFk], references: [ActividadId], map: "actividad-PesonaAcargo")
  persona          persona   @relation(fields: [DniPersonaAcargo], references: [dni], map: "persona-PersonAcargo")

  @@index([IdActividadFk], map: "actividad-PesonaAcargo_idx")
}

model post {
  idPost     Int       @id @default(autoincrement())
  DniAutor   Float
  TipoPostFk Int
  Titulo     String    @db.VarChar(80)
  Cuerpo     String    @db.Text
  imagen     String?   @db.VarChar(1000)
  fecha      DateTime? @db.Date
  visible    Boolean   @default(true)
  persona    persona   @relation(fields: [DniAutor], references: [dni], map: "post-autor")
  tipopost   tipopost  @relation(fields: [TipoPostFk], references: [TipoId], map: "post-tipo")

  @@index([DniAutor], map: "post-autor_idx")
  @@index([TipoPostFk], map: "post-tipo_idx")
}

model rol {
  idrol       Int       @id @default(autoincrement())
  NombreRol   String    @db.VarChar(45)
  Descripcion String    @db.VarChar(80)
  activa      Boolean   @default(true)
  persona     persona[]
}

model rutinagenerica {
  idRutinaGenerica   Int        @id @default(autoincrement())
  ActividadFk        Int
  DescripcionRutina  String     @db.VarChar(3000)
  Imagenes           String?    @db.VarChar(2000)
  TipoRutinaFk       Int
  fechaActualizacion String?    @db.VarChar(45)
  activa             Boolean?   @default(true)
  actividad          actividad  @relation(fields: [ActividadFk], references: [ActividadId], map: "rutinaGenerica-actividad")
  tiporutina         tiporutina @relation(fields: [TipoRutinaFk], references: [idTipoRutina], map: "rutinaGenerica-tipo")

  @@index([ActividadFk], map: "rutinaGenerica-actividad_idx")
  @@index([TipoRutinaFk], map: "rutinaGenerica-tipo_idx")
}

model rutinapersonalizada {
  idRutinaPersonalizada Int        @id @default(autoincrement())
  IdActividadfk         Int
  TipoRutinaFk          Int
  PersonaDniFk          Float
  DescripcionRutina     String     @db.VarChar(5000)
  Imagenes              String?    @db.VarChar(1000)
  fechaActualizacion    DateTime?  @db.DateTime(5)
  activo                Boolean?   @default(true)
  actividad             actividad  @relation(fields: [IdActividadfk], references: [ActividadId], map: "rutinaPersonalizada-Actividad")
  persona               persona    @relation(fields: [PersonaDniFk], references: [dni], map: "rutinaPersonalizada-persona")
  tiporutina            tiporutina @relation(fields: [TipoRutinaFk], references: [idTipoRutina], map: "rutinaPersonalizada-tipo")

  @@index([IdActividadfk], map: "rutinaPersonalizada-Actividad_idx")
  @@index([PersonaDniFk], map: "rutinaPersonalizada-persona_idx")
  @@index([TipoRutinaFk], map: "rutinaPersonalizada-tipo_idx")
}

model tipopost {
  TipoId     Int    @id @default(autoincrement())
  NombreTIpo String @db.VarChar(45)
  post       post[]
}

model tiporutina {
  idTipoRutina        Int                   @id @default(autoincrement())
  NombreTipo          String                @db.VarChar(45)
  rutinagenerica      rutinagenerica[]
  rutinapersonalizada rutinapersonalizada[]
}

model venta {
  CodVenta       Int     @id @default(autoincrement())
  TrabajadorIDni Float
  NombeProducto  String  @db.VarChar(45)
  precio         Float
  cantidad       Int
  persona        persona @relation(fields: [TrabajadorIDni], references: [dni], map: "venta-persona")

  @@index([TrabajadorIDni], map: "venta-persona_idx")
}
